(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{459:function(s,a,n){"use strict";n.r(a);var e=n(16),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"acme-sh-概述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#acme-sh-概述"}},[s._v("#")]),s._v(" acme.sh 概述")]),s._v(" "),n("ul",[n("li",[s._v("一个纯粹用Shell（Unix shell）语言编写的ACME协议客户端。")]),s._v(" "),n("li",[s._v("完整的ACME协议实施。 支持ACME v1和ACME v2 支持ACME v2通配符证书")]),s._v(" "),n("li",[s._v("简单，功能强大且易于使用。你只需要3分钟就可以学习它。")]),s._v(" "),n("li",[s._v("Let's Encrypt免费证书客户端最简单的shell脚本。")]),s._v(" "),n("li",[s._v("纯粹用Shell编写，不依赖于python或官方的Let's Encrypt客户端。")]),s._v(" "),n("li",[s._v("只需一个脚本即可自动颁发，续订和安装证书。 不需要root/sudoer访问权限。")]),s._v(" "),n("li",[s._v("支持在Docker内使用，支持IPv6\n")])]),s._v(" "),n("h2",{attrs:{id:"安装-acme-sh"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-acme-sh"}},[s._v("#")]),s._v(" 安装 acme.sh")]),s._v(" "),n("div",{staticClass:"language-shel line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("curl https://get.acme.sh | sh\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("并创建 一个 bash 的 alias, 方便你的使用: "),n("code",[s._v("alias acme.sh=~/.acme.sh/acme.sh")])]),s._v(" "),n("h2",{attrs:{id:"生成证书"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#生成证书"}},[s._v("#")]),s._v(" 生成证书")]),s._v(" "),n("p",[n("strong",[s._v("acme.sh")]),s._v(" 实现了 "),n("strong",[s._v("acme")]),s._v(" 协议支持的所有验证协议. 一般有两种方式验证: http 和 dns 验证. \\")]),s._v(" "),n("h3",{attrs:{id:"http方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http方式"}},[s._v("#")]),s._v(" http方式")]),s._v(" "),n("p",[s._v("http 方式需要在你的网站根目录下放置一个文件, 来验证你的域名所有权,完成验证. 然后就可以生成证书了.")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("acme.sh  --issue  -d kubesre.com -d www.kubesre.com  --webroot  /application/nginx/html/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("只需要指定域名, 并指定域名所在的网站根目录. "),n("strong",[s._v("acme.sh")]),s._v(" 会全自动的生成验证文件, 并放到网站的根目录, 然后自动完成验证. 最后会聪明的删除验证文件. 整个过程没有任何副作用.")]),s._v(" "),n("p",[s._v("如果你用的 web服务器, "),n("strong",[s._v("acme.sh")]),s._v(" 还可以智能的从 "),n("strong",[s._v("apache")]),s._v("的配置中自动完成验证, 你不需要指定网站根目录:")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("acme.sh --issue  -d kubesre.com   --apache\n\nacme.sh --issue  -d kubesre.com   --nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"dns方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dns方式"}},[s._v("#")]),s._v(" dns方式")]),s._v(" "),n("p",[s._v("手动 dns 方式, 手动在域名上添加一条 txt 解析记录, 验证域名所有权")]),s._v(" "),n("p",[s._v("这种方式的好处是, 你不需要任何服务器, 不需要任何公网 ip, 只需要 dns 的解析记录即可完成验证. 坏处是，如果不同时配置 Automatic DNS API，使用这种方式 acme.sh 将无法自动更新证书，每次都需要手动再次重新解析验证域名所有权。")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("acme.sh  --issue  --dns   -d kubesre.com "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n --yes-I-know-dns-manual-mode-enough-go-ahead-please\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("然后, "),n("strong",[s._v("acme.sh")]),s._v(" 会生成相应的解析记录显示出来, 你只需要在你的域名管理面板中添加这条 txt 记录即可.")]),s._v(" "),n("p",[s._v("等待解析完成之后, 重新生成证书:")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("acme.sh --renew -d kubesre.com --yes-I-know-dns-manual-mode-enough-go-ahead-please\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":21:23 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Renew: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kubesre.com'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":21:28 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Using CA: https://acme.zerossl.com/v2/DV90\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":21:28 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Multi "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("domain")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DNS:kubesre.com,DNS:www.kubesre.com'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":21:28 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Getting domain auth token "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" each domain\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":21:28 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Verifying: kubesre.com\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":21:39 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Processing, The CA is processing your order, please just wait. "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/30"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":21:46 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Success\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":21:46 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Verifying: www.kubesre.com\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":21:51 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Processing, The CA is processing your order, please just wait. "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/30"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":21:58 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Success\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":21:58 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Verify finished, start to sign.\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":21:58 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Lets finalize the order.\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":21:58 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Le_OrderFinalize")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://acme.zerossl.com/v2/DV90/order/5RzPnQTU0MBIaZgvOqiSkQ/finalize'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":22:04 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Order status is processing, lets "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" and retry.\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":22:04 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Retry after: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":22:20 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Polling order status: https://acme.zerossl.com/v2/DV90/order/5RzPnQTU0MBIaZgvOqiSkQ\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":22:28 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Downloading cert.\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":22:28 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Le_LinkCert")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://acme.zerossl.com/v2/DV90/cert/RIlS-0BCVnWMmTIzTSy69g'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":22:32 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Cert success.\n-----BEGIN CERTIFICATE-----\n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\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("b4YhcvrzGJwehsPq6m0yjCbh3cCSd3vyGo0")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n-----END CERTIFICATE-----\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":22:32 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Your cert is in: /root/.acme.sh/kubesre.com/kubesre.com.cer\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":22:32 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Your cert key is in: /root/.acme.sh/kubesre.com/kubesre.com.key\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":22:32 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" The intermediate CA cert is in: /root/.acme.sh/kubesre.com/ca.cer\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":22:32 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" And the full chain certs is there: /root/.acme.sh/kubesre.com/fullchain.cer\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br")])]),n("p",[s._v("注意第二次这里用的是 "),n("code",[s._v("--renew")])]),s._v(" "),n("p",[n("strong",[s._v("dns 方式的真正强大之处在于可以使用域名解析商提供的 api 自动添加 txt 记录完成验证.")])]),s._v(" "),n("p",[n("strong",[s._v("acme.sh")]),s._v(" 目前支持 cloudflare, dnspod, cloudxns, godaddy 以及 ovh 等数十种解析商的自动集成.")]),s._v(" "),n("p",[s._v("以 dnspod 为例, 你需要先登录到 dnspod 账号, 生成你的 api id 和 api key, 都是免费的. 然后:")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DP_Id")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kube123"')]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DP_Key")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sADDsdasdgdsf"')]),s._v("\n\nacme.sh   --issue   --dns dns_dp   -d kubesre.com  -d www.kubesre.com\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("证书就会自动生成了. 这里给出的 api id 和 api key 会被自动记录下来, 将来你在使用 dnspod api 的时候, 就不需要再次指定了. 直接生成就好了:")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("acme.sh  --issue   -d  kubesre.com   --dns  dns_dp\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("更详细的 api 用法: https://github.com/Neilpang/acme.sh/blob/master/dnsapi/README.md")]),s._v(" "),n("h2",{attrs:{id:"更新证书"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#更新证书"}},[s._v("#")]),s._v(" 更新证书")]),s._v(" "),n("p",[s._v("目前证书申请后有效期为60天")]),s._v(" "),n("p",[s._v("目前由于 acme 协议和 letsencrypt CA 都在频繁的更新, 因此 acme.sh 也经常更新以保持同步.")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 升级 acme.sh 到最新版")]),s._v("\nacme.sh --upgrade\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果你不想手动升级, 可以开启自动升级:")]),s._v("\nacme.sh  --upgrade  --auto-upgrade\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#之后, acme.sh 就会自动保持更新了.")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 你也可以随时关闭自动更新:")]),s._v("\nacme.sh --upgrade  --auto-upgrade  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h2",{attrs:{id:"修改-ca"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改-ca"}},[s._v("#")]),s._v(" 修改 CA")]),s._v(" "),n("p",[s._v("默认 CA 将使用"),n("a",{attrs:{href:"https://github.com/acmesh-official/acme.sh/wiki/ZeroSSL.com-CA",target:"_blank",rel:"noopener noreferrer"}},[s._v("ZeroSSL"),n("OutboundLink")],1),s._v("，由于特殊需求需要更改CA，请通过下面的方式进行修改。")]),s._v(" "),n("p",[s._v("可以通过提供"),n("code",[s._v("--server")]),s._v("参数自由使用任何受支持的 CA ：")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("acme.sh --issue -d kubesre.com --dns dns_cf --server letsencrypt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("也可以通过 --set-default-ca  设置的默认 ca：")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("acme.sh --set-default-ca --server letsencrypt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"基于csr签发证书"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基于csr签发证书"}},[s._v("#")]),s._v(" 基于CSR签发证书")]),s._v(" "),n("p",[s._v("通过openssl生成csr")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("openssl genrsa -out kubesre.com/kubesre.com.key "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" \nopenssl req -new -key kubesre.com/kubesre.com.key -out kubesre.com/kubesre.com.csr -subj "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/C=CN/L=Shanghai/O=kubesre/OU=shanghai/CN=kubesre.com"')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("基于csr签发证书")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("acme.sh --signcsr --csr "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/intermediateca.csr --dns --yes-I-know-dns-manual-mode-enough-go-ahead-please  --server zerossl\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":03:11 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Copy csr to: /root/.acme.sh/kubesre.com/kubesre.com.csr\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":03:15 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Using CA: https://acme.zerossl.com/v2/DV90\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":03:15 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Single "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("domain")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kubesre.com'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":03:15 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Getting domain auth token "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" each domain\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":03:27 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Getting webroot "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("domain")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kubesre.com'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":03:27 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Add the following TXT record:\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":03:27 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Domain: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'_acme-challenge.kubesre.com'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":03:27 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" TXT value: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'JIuDsu6k_4xnvRZbwnkWqEIXJ17hjVHGXchrgvydC90'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":03:27 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Please be aware that you prepend _acme-challenge. before your domain\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":03:27 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" so the resulting subdomain will be: _acme-challenge.kubesre.com\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":03:27 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Please "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" the TXT records to the domains, and re-run with --renew.\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":03:27 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Please check log "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" details: /root/.acme.sh/acme.sh.log\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("配置DNS域名解析TXT记录并验证")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dig")]),s._v(" @223.5.5.5 _acme-challenge.kubesre.com txt +short\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JIuDsu6k_4xnvRZbwnkWqEIXJ17hjVHGXchrgvydC90"')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("重试签发证书")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v(" acme.sh --renew -d kubesre.com --yes-I-know-dns-manual-mode-enough-go-ahead-please\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":16:28 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Renew: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kubesre.com'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":16:36 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Using CA: https://acme.zerossl.com/v2/DV90\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":16:36 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Single "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("domain")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kubesre.com'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":16:36 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Getting domain auth token "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" each domain\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":16:36 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Verifying: kubesre.com\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":16:51 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Processing, The CA is processing your order, please just wait. "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/30"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":17:02 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Success\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":17:02 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Verify finished, start to sign.\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":17:02 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Lets finalize the order.\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":17:02 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Le_OrderFinalize")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://acme.zerossl.com/v2/DV90/order/OszJC-V5ka_7WYpupZ4mkQ/finalize'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":17:11 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Order status is processing, lets "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" and retry.\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":17:11 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Retry after: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":17:27 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Polling order status: https://acme.zerossl.com/v2/DV90/order/OszJC-V5ka_7WYpupZ4mkQ\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":17:33 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Downloading cert.\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":17:33 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Le_LinkCert")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://acme.zerossl.com/v2/DV90/cert/yeadYGbm-KLNqMWlqSzShg'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":17:41 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Cert success.\n-----BEGIN CERTIFICATE-----\nMIIHZDCCBUygAwIBAgIQEkvN2TAkV2mdPUF1lweQ+jANBgkqhkiG9w0BAQwFADBL\nMQswCQYDVQQGEwJBVDEQMA4GA1UEChMHWmVyb1NTTDEqMCgGA1UEAxMhWmVyb1NT\nTCBSU0EgRG9tYWluIFNlY3VyZSBTaXRlIENBMB4XDTIxMTIyMTAwMDAwMFoXDTIy\nMDMyMTIzNTk1OVowFjEUMBIGA1UEAxMLa3ViZXNyZS5jb20wggIiMA0GCSqGSIb3\nDQEBAQUAA4ICDwAwggIKAoICAQC7gsfbCde2EVerXfzi/+1pGvePusulmh2gF+vh\nIpTwdIC7tpO7cZiHVjR2BsC8XYptUqWpJtuehRLqN3PI2xdpFyGMT9EKgPcIsN3a\ny619t/UlskrVbAZYqfAC4613f98WhizYL6Kb6pOuwsS2rn5XeUAXuNVDcnRJ79i4\nld8Q6H+xmOSU3XqnTNqv4Yq7F+l1nVNktpozJM0MmqI6e+saN4PlaHJZJ2Zc9dTQ\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("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\neg0z2wcNGmZEPG19ngYf79+xLpmmZj0F\n-----END CERTIFICATE-----\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":17:41 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Your cert is in: /root/.acme.sh/kubesre.com/kubesre.com.cer\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":17:41 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Your cert key is in: /root/.acme.sh/kubesre.com/kubesre.com.key\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":17:41 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" The intermediate CA cert is in: /root/.acme.sh/kubesre.com/ca.cer\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Tue Dec "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":17:41 CST "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" And the full chain certs is there: /root/.acme.sh/kubesre.com/fullchain.cer\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ops .acme.sh"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);