import { _ as _export_sfc, o as openBlock, c as createElementBlock, a as createStaticVNode } from "./app-d515af8b.js";
const _sfc_main = {};
const _hoisted_1 = /* @__PURE__ */ createStaticVNode('<h2 id="上篇回顾" tabindex="-1"><a class="header-anchor" href="#上篇回顾" aria-hidden="true">#</a> 上篇回顾</h2><p>上篇文章我们主要是针对处理告警自助创建群进行了说明设计。增加该功能的初衷主要是为了方便处理问题，当我们遇到比较严重的问题、或者说需要开发、主管一起进行排查时我们就可以使用该功能，点击后会自动将对应开发、主管拉入群聊中，当问题解决后该群会移除除了群主(建议新增一个账号来作为群主账号)之外所有人。</p><h2 id="案例介绍" tabindex="-1"><a class="header-anchor" href="#案例介绍" aria-hidden="true">#</a> 案例介绍</h2><p>使用<code>gin</code>、<code>gorm</code>实现对钉钉日程进行<code>crud</code>，以便我们可以灵活的排版、调班等操作。当然也可以直接在钉钉进行创建日程。创建后日程后每天会提醒当值人员。</p><h2 id="环境概述" tabindex="-1"><a class="header-anchor" href="#环境概述" aria-hidden="true">#</a> 环境概述</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># kubectl get nodes </span>\nNAME               STATUS   ROLES                  AGE   VERSION\nk8s-master-50.57   Ready    control-plane,master   96d   v1.20.5\nk8s-node-50.58     Ready    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>                 96d   v1.20.5\nk8s-node-50.59     Ready    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>                 96d   v1.20.5\n\n<span class="token comment"># kubectl get pod -n monitoring </span>\nNAME                                  READY   STATUS    RESTARTS   AGE\nalertmanager-main-0                   <span class="token number">2</span>/2     Running   <span class="token number">0</span>          8d\nalertmanager-main-1                   <span class="token number">2</span>/2     Running   <span class="token number">0</span>          8d\nalertmanager-main-2                   <span class="token number">2</span>/2     Running   <span class="token number">0</span>          8d\nblackbox-exporter-55c457d5fb-5m7ql    <span class="token number">3</span>/3     Running   <span class="token number">0</span>          8d\ngrafana-9df57cdc4-gpzsq               <span class="token number">1</span>/1     Running   <span class="token number">0</span>          8d\nkube-state-metrics-56dbb74497-gpkn9   <span class="token number">3</span>/3     Running   <span class="token number">0</span>          8d\nnode-exporter-4wl6d                   <span class="token number">2</span>/2     Running   <span class="token number">0</span>          8d\nnode-exporter-b4595                   <span class="token number">2</span>/2     Running   <span class="token number">0</span>          8d\nnode-exporter-g4l99                   <span class="token number">2</span>/2     Running   <span class="token number">0</span>          8d\nprometheus-adapter-59df95d9f5-tnt4w   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          8d\nprometheus-adapter-59df95d9f5-xhz5v   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          8d\nprometheus-k8s-0                      <span class="token number">2</span>/2     Running   <span class="token number">1</span>          8d\nprometheus-k8s-1                      <span class="token number">2</span>/2     Running   <span class="token number">1</span>          10m\nprometheus-operator-c46b8b7c9-mg9cv   <span class="token number">2</span>/2     Running   <span class="token number">0</span>          8d\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>golang版本：1.17.10</li><li>gin版本：1.9.0</li><li>gorm版本：1.25.1</li></ul><h2 id="快速开始" tabindex="-1"><a class="header-anchor" href="#快速开始" aria-hidden="true">#</a> 快速开始</h2><ol><li>创建日程</li></ol><ul><li>使用钉钉<code>APP</code>进行创建 <img src="https://img.kubesre.com/kubesre/20230903/1.png" alt=""><img src="https://img.kubesre.com/kubesre/20230903/2.png" alt=""></li></ul><blockquote><p>这里的需要填写的内容就不做过多的解释了，按照需求填写即可</p></blockquote><ul><li>使用<code>API</code>进行创建 <img src="https://img.kubesre.com/kubesre/20230903/3.png" alt=""></li></ul><blockquote><p>具体代码下边有简要说明</p></blockquote><ol start="2"><li>查看已经创建的日程 <img src="https://img.kubesre.com/kubesre/20230903/4.png" alt=""></li><li>当值人员提醒消息 <img src="https://img.kubesre.com/kubesre/20230903/5.png" alt=""></li></ol><h3 id="核心代码" tabindex="-1"><a class="header-anchor" href="#核心代码" aria-hidden="true">#</a> 核心代码</h3><ol><li>数据库字段设计</li></ol><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>type UserListOfCalendar struct <span class="token punctuation">{</span>\n	ID        uint           `gorm<span class="token operator">:</span><span class="token string">&quot;primarykey&quot;</span> json<span class="token operator">:</span><span class="token string">&quot;id&quot;</span> form<span class="token operator">:</span><span class="token string">&quot;id&quot;</span>`\n	CreatedAt time.Time      `gorm<span class="token operator">:</span><span class="token string">&quot;column:creation_time&quot;</span> json<span class="token operator">:</span><span class="token string">&quot;created_at&quot;</span> form<span class="token operator">:</span><span class="token string">&quot;created_at&quot;</span>`\n	UpdatedAt time.Time      `gorm<span class="token operator">:</span><span class="token string">&quot;column:update_time&quot;</span> json<span class="token operator">:</span><span class="token string">&quot;updated_at&quot;</span> form<span class="token operator">:</span><span class="token string">&quot;updated_at&quot;</span>`\n	DeletedAt gorm.DeletedAt `gorm<span class="token operator">:</span><span class="token string">&quot;column:delete_time;index&quot;</span> json<span class="token operator">:</span><span class="token string">&quot;deleted_at&quot;</span> form<span class="token operator">:</span><span class="token string">&quot;deleted_at&quot;</span>`\n	Name      string         `gorm<span class="token operator">:</span><span class="token string">&quot;comment: &#39;值班人员名称&#39;;size:255;not null&quot;</span> json<span class="token operator">:</span><span class="token string">&quot;name&quot;</span> form<span class="token operator">:</span><span class="token string">&quot;name&quot;</span>`\n	UserID    string         `gorm<span class="token operator">:</span><span class="token string">&quot;comment: &#39;值班人员userID&#39;;size:64;not null;unique&quot;</span> json<span class="token operator">:</span><span class="token string">&quot;userid&quot;</span> form<span class="token operator">:</span><span class="token string">&quot;userid&quot;</span>`\n	UserPhone string         `gorm<span class="token operator">:</span><span class="token string">&quot;comment: &#39;值班人员登录钉钉手机号&#39;;size:11;not null;unique&quot;</span> json<span class="token operator">:</span><span class="token string">&quot;user_phone&quot;</span> form<span class="token operator">:</span><span class="token string">&quot;user_phone&quot;</span>`\n	UnionID   string         `gorm<span class="token operator">:</span><span class="token string">&quot;comment: &#39;值班人员登录钉钉手机号&#39;;size:64;not null;unique&quot;</span> json<span class="token operator">:</span><span class="token string">&quot;unionID&quot;</span> form<span class="token operator">:</span><span class="token string">&quot;unionID&quot;</span>`\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>初始化创建日程参数</li></ol><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">InitCreateCalendarBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n	ccb <span class="token operator">:=</span> calendar<span class="token punctuation">.</span>RequestCalendar<span class="token punctuation">{</span><span class="token punctuation">}</span>\n	ccb<span class="token punctuation">.</span>Recurrence<span class="token punctuation">.</span>Pattern<span class="token punctuation">.</span>Type <span class="token operator">=</span> <span class="token string">&quot;daily&quot;</span>\n	ccb<span class="token punctuation">.</span>Recurrence<span class="token punctuation">.</span>Range<span class="token punctuation">.</span>Type <span class="token operator">=</span> <span class="token string">&quot;numbered&quot;</span>\n	ccb<span class="token punctuation">.</span>Recurrence<span class="token punctuation">.</span>Range<span class="token punctuation">.</span>NumberOfOccurrences <span class="token operator">=</span> <span class="token number">30</span>\n	reminder <span class="token operator">:=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>\n		Method  <span class="token builtin">string</span> <span class="token string">`json:&quot;method&quot;`</span>\n		Minutes <span class="token builtin">int</span>    <span class="token string">`json:&quot;minutes&quot;`</span>\n	<span class="token punctuation">}</span><span class="token punctuation">{</span>Method<span class="token punctuation">:</span> <span class="token string">&quot;dingtalk&quot;</span><span class="token punctuation">,</span> Minutes<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">}</span>\n	ccb<span class="token punctuation">.</span>Reminders <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>ccb<span class="token punctuation">.</span>Reminders<span class="token punctuation">,</span> reminder<span class="token punctuation">)</span>\n	ccb<span class="token punctuation">.</span>IsAllDay <span class="token operator">=</span> <span class="token boolean">false</span>\n	uiConfig <span class="token operator">:=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>\n		UIName <span class="token builtin">string</span> <span class="token string">`json:&quot;uiName&quot;`</span>\n	<span class="token punctuation">}</span><span class="token punctuation">{</span>UIName<span class="token punctuation">:</span> <span class="token string">&quot;transferEventButton&quot;</span><span class="token punctuation">}</span>\n	ccb<span class="token punctuation">.</span>UIConfigs <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>ccb<span class="token punctuation">.</span>UIConfigs<span class="token punctuation">,</span> uiConfig<span class="token punctuation">)</span>\n	ccb<span class="token punctuation">.</span>Start<span class="token punctuation">.</span>DateTime <span class="token operator">=</span> <span class="token string">&quot;2023-09-01T09:00:00+08:00&quot;</span>\n	ccb<span class="token punctuation">.</span>Start<span class="token punctuation">.</span>TimeZone <span class="token operator">=</span> <span class="token string">&quot;Asia/Shanghai&quot;</span>\n	ccb<span class="token punctuation">.</span>End<span class="token punctuation">.</span>DateTime <span class="token operator">=</span> <span class="token string">&quot;2023-09-01T23:59:59+08:00&quot;</span>\n	ccb<span class="token punctuation">.</span>End<span class="token punctuation">.</span>TimeZone <span class="token operator">=</span> <span class="token string">&quot;Asia/Shanghai&quot;</span>\n	CreateCalendarBody <span class="token operator">=</span> ccb\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>获取用户<code>unionid</code></li></ol><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>gu <span class="token operator">*</span>getUnionid<span class="token punctuation">)</span> <span class="token function">GetUserUnionid</span><span class="token punctuation">(</span>userid <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>err <span class="token builtin">error</span><span class="token punctuation">,</span> resUnionid <span class="token operator">*</span>calendar<span class="token punctuation">.</span>ResponseUnionID<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n	<span class="token keyword">var</span> <span class="token punctuation">(</span>\n		ctx        context<span class="token punctuation">.</span>Context\n		cancel     context<span class="token punctuation">.</span>CancelFunc\n		reqUnionid calendar<span class="token punctuation">.</span>RequestUnionID\n	<span class="token punctuation">)</span>\n	reqUnionid<span class="token punctuation">.</span>UserID <span class="token operator">=</span> userid\n	ctx<span class="token punctuation">,</span> cancel <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">WithTimeout</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>Second<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span>\n	<span class="token keyword">defer</span> <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n	header <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>\n		<span class="token string">&quot;Content-type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">,</span>\n	<span class="token punctuation">}</span>\n	<span class="token boolean">_</span><span class="token punctuation">,</span> token <span class="token operator">:=</span> utils<span class="token punctuation">.</span><span class="token function">GetToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n	url <span class="token operator">:=</span> viper<span class="token punctuation">.</span><span class="token function">GetString</span><span class="token punctuation">(</span><span class="token string">&quot;calendar.getunionidURL&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;access_token=&quot;</span> <span class="token operator">+</span> token\n	err<span class="token punctuation">,</span> data <span class="token operator">:=</span> utils<span class="token punctuation">.</span><span class="token function">DoRequest</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> header<span class="token punctuation">,</span> reqUnionid<span class="token punctuation">)</span>\n	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>\n		<span class="token keyword">return</span> err<span class="token punctuation">,</span> <span class="token boolean">nil</span>\n	<span class="token punctuation">}</span>\n	<span class="token boolean">_</span> <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">Unmarshal</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>resUnionid<span class="token punctuation">)</span>\n	<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> resUnionid\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>获取当天日程</li></ol><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>gc <span class="token operator">*</span>getCalendar<span class="token punctuation">)</span> <span class="token function">GetCalendarOfUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>err <span class="token builtin">error</span><span class="token punctuation">,</span> summaryName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n	<span class="token keyword">var</span> <span class="token punctuation">(</span>\n		ctx                       context<span class="token punctuation">.</span>Context\n		cancel                    context<span class="token punctuation">.</span>CancelFunc\n		responseGetCalendarOfUser <span class="token operator">*</span>calendar<span class="token punctuation">.</span>ResponseGetCalendarOfUser\n	<span class="token punctuation">)</span>\n	ctx<span class="token punctuation">,</span> cancel <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">WithTimeout</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>Second<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span>\n	<span class="token keyword">defer</span> <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n	<span class="token boolean">_</span><span class="token punctuation">,</span> token <span class="token operator">:=</span> utils<span class="token punctuation">.</span><span class="token function">GetToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n	header <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>\n		<span class="token string">&quot;x-acs-dingtalk-access-token&quot;</span><span class="token punctuation">:</span> token<span class="token punctuation">,</span>\n		<span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">:</span>                <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">,</span>\n	<span class="token punctuation">}</span>\n	nowTime <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n	startTime <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Date</span><span class="token punctuation">(</span>nowTime<span class="token punctuation">.</span><span class="token function">Year</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nowTime<span class="token punctuation">.</span><span class="token function">Month</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nowTime<span class="token punctuation">.</span><span class="token function">Day</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> nowTime<span class="token punctuation">.</span><span class="token function">Location</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n	endTime <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Date</span><span class="token punctuation">(</span>nowTime<span class="token punctuation">.</span><span class="token function">Year</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nowTime<span class="token punctuation">.</span><span class="token function">Month</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nowTime<span class="token punctuation">.</span><span class="token function">Day</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> nowTime<span class="token punctuation">.</span><span class="token function">Location</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n	urlAdd <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%s%s%s%s%s%s&quot;</span><span class="token punctuation">,</span> viper<span class="token punctuation">.</span><span class="token function">GetString</span><span class="token punctuation">(</span><span class="token string">&quot;calendar.getCalendarOfUser&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n		viper<span class="token punctuation">.</span><span class="token function">GetString</span><span class="token punctuation">(</span><span class="token string">&quot;calendar.adminUnion&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n		<span class="token string">&quot;/calendars/primary/events?timeMin=&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">.</span><span class="token function">QueryEscape</span><span class="token punctuation">(</span>startTime<span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">&quot;2006-01-02T15:04:05-07:00&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;&amp;timeMax=&quot;</span><span class="token punctuation">,</span>\n		url<span class="token punctuation">.</span><span class="token function">QueryEscape</span><span class="token punctuation">(</span>endTime<span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">&quot;2006-01-02T15:04:05-07:00&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n	<span class="token comment">// 这里你可以重试请求</span>\n	err<span class="token punctuation">,</span> data <span class="token operator">:=</span> utils<span class="token punctuation">.</span><span class="token function">DoRequest</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> urlAdd<span class="token punctuation">,</span> header<span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>\n	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>\n		common<span class="token punctuation">.</span>TPLogger<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">&quot;获取值班人员信息失败&quot;</span><span class="token punctuation">)</span>\n		<span class="token keyword">return</span> err<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span>\n	<span class="token punctuation">}</span>\n	<span class="token boolean">_</span> <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">Unmarshal</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>responseGetCalendarOfUser<span class="token punctuation">)</span>\n	summaryName <span class="token operator">=</span> responseGetCalendarOfUser<span class="token punctuation">.</span>Events<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Summary\n	<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> summaryName\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="触发告警" tabindex="-1"><a class="header-anchor" href="#触发告警" aria-hidden="true">#</a> 触发告警</h3><p>看下图，可以看出已告警已触发了 <img src="https://img.kubesre.com/kubesre/20230903/6.png" alt=""></p><h3 id="调班" tabindex="-1"><a class="header-anchor" href="#调班" aria-hidden="true">#</a> 调班</h3><p><img src="https://img.kubesre.com/kubesre/20230903/7.png" alt=""></p><h3 id="调班后再次触发告警" tabindex="-1"><a class="header-anchor" href="#调班后再次触发告警" aria-hidden="true">#</a> 调班后再次触发告警</h3><p><img src="https://img.kubesre.com/kubesre/20230903/8.png" alt=""></p><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>告警排班功能到此已经添加完成了，主要是为了解决有些小伙伴公司没有内部的排班系统，所以这次利用钉钉的日程功能来实现一个灵活的排班机制。下期内容：告警聚合</p>', 31);
const _hoisted_32 = [
  _hoisted_1
];
function _sfc_render(_ctx, _cache) {
  return openBlock(), createElementBlock("div", null, _hoisted_32);
}
const gaojingpaibangongnenshixian_html = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render], ["__file", "gaojingpaibangongnenshixian.html.vue"]]);
export {
  gaojingpaibangongnenshixian_html as default
};
